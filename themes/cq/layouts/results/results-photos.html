{{ define "head" }}
  <title>{{ .Params.Year }} DX Marathon: {{ .Params.SubTitle }}</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
  <script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>
{{ end }}

{{ define "main" }}
  <section class='content'>

    <h1 class="light">{{ .Parent.Params.Year }} DX Marathon: <b>{{ .Params.SubTitle }}</b></h1>

    <div class='sidebar'>
      <div class='aside'>
        <ul class="nav-results">
          <li><a href="../">Main Article</a></li>
          {{ range .Parent.Paginator.Pages }}
            {{ if (eq . $) }}
              <li class="current">{{ .Params.SubTitle }}</li>
            {{ else }}
              <li><a href="{{ .Permalink }}">{{ .Params.SubTitle }}</a></li>
            {{ end }}
          {{ end }}
        </ul>
        {{ with .Parent.Params.PDF }}
          <center>
            <a href='../{{.}}'>Download a full PDF of the article</a>
          </center>
        {{ end }}
      </div>
    </div>

<style>
  .photo-gallery .break {
    margin-bottom: 6em;
  }
  .photo {
    display: inline-block;
    border: 1px solid black;
    padding: 1em;
    text-align: center;

    margin: 0 2em 2em 0;
  }
  .photo .thumbnail {
    width: 220px;
    height: 220px;
    margin-bottom: 0.5em;
  }
  a.lightbox, a.lightbox:link, a.lightbox:visited {
    text-decoration: none;
  }
</style>
    <div class='body'>
      {{ .Content }}

      <div class="photo-gallery">
        {{ range sort (where (.Resources.ByType "image") "Params.weight" "ge" 0) "Params.weight" }}
          {{ if eq 0 (mod .Params.Weight 10) }}
            <div class="break">&nbsp;</div>
          {{ end }}

          <a
            class="lightbox"
            href="{{ .RelPermalink }}"
            data-title="<center><b>{{ .Params.Category }}:</b> {{ .Params.Caption }}</center>"
          >
            <figure class="photo">
              <img class="thumbnail" src='{{ (.Fill "220x220 q100 Center").RelPermalink }}' />
              <figcaption>
                <b>{{ .Params.Category }}:</b>
                {{ .Params.Caption }}
              </figcaption>
            </figure>
          </a>
        {{ end }}
      </div>

    </div>

  </section>

  <script type="text/javascript">
    const lightbox = GLightbox({
      selector: '.lightbox',
      touchNavigation: true,
      loop: true,
    });
  </script>

{{ end }}
